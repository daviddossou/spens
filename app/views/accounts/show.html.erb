<% content_for :title, @account.name %>

<div class="page-container page-container--narrow">
  <header class="page-header">
    <p class="page-header__subtitle"><%= t('.subtitle') %></p>
  </header>

  <div class="page-content">
    <div class="account-detail">
      <div class="account-detail__balance">
        <span class="account-detail__balance-label"><%= t('.balance') %></span>
        <span class="account-detail__balance-value"><%= format_money(@account.balance, current_user.currency) %></span>
      </div>

      <% if @account.saving_goal.to_f > 0 %>
        <div class="account-detail__goal">
          <span class="account-detail__goal-label"><%= t('.saving_goal') %></span>
          <span class="account-detail__goal-value"><%= format_money(@account.saving_goal, current_user.currency) %></span>
        </div>
      <% end %>
    </div>

    <div class="commitment-actions">
      <h2 class="commitment-section-title"><%= t('.actions_title') %></h2>
      <div class="action-buttons">
        <%= render Ui::ButtonComponent.new(
          text: t('.add_transaction'),
          url: new_transaction_path(kind: 'transfer', account_id: @account.id),
          variant: :primary,
          size: :lg,
          full_width: true
        ) %>

        <%= render Ui::ButtonComponent.new(
          text: t('.edit_account'),
          url: edit_account_path(id: @account.id),
          variant: :secondary,
          size: :lg,
          full_width: true
        ) %>

        <% unless @account.transactions.exists? %>
          <%= render Ui::ButtonComponent.new(
            text: t('.delete_account'),
            url: account_path(id: @account.id),
            variant: :danger,
            size: :lg,
            full_width: true,
            method: :delete,
            data: { "turbo-confirm" => t('.delete_confirmation') }
          ) %>
        <% end %>
      </div>
    </div>

    <div class="commitment-transactions">
      <h2 class="commitment-section-title"><%= t('.recent_transactions') %></h2>
      <% if @latest_transactions.any? %>
        <div class="transactions-list">
          <%= render TransactionItemComponent.with_collection(@latest_transactions, transaction: :itself) %>
        </div>
      <% else %>
        <div class="empty-state">
          <p><%= t('.no_transactions') %></p>
        </div>
      <% end %>
    </div>
  </div>
</div>
