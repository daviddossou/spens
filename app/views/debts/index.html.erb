<% content_for :title, t('.title') %>

<div class="page-container page-container--narrow">
  <header class="page-header">
    <h1 class="page-header__title"><%= t('.title') %></h1>
    <p class="page-header__subtitle"><%= t('.subtitle') %></p>
  </header>

  <div class="page-content">
    <!-- Direction Switcher -->
    <div class="debts-switcher" style="margin-bottom: 2rem;">
      <%= render Ui::SwitcherComponent.new(
        options: [
          { text: t('.i_lent'), value: 'lent', url: debts_path(direction: 'lent') },
          { text: t('.i_borrowed'), value: 'borrowed', url: debts_path(direction: 'borrowed') }
        ],
        current: @direction
      ) %>
    </div>
    <% if @debts.any? %>
      <div class="debts-list">
        <% @debts.each do |debt| %>
          <%= render Ui::CommitmentCardComponent.new(
            title: debt.name,
            current_value: debt.total_reimbursed,
            target_value: debt.total_lent,
            currency: current_user.currency,
            url: debt_path(id: debt.id)
          ) %>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <svg class="empty-state__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
        </svg>
        <h3><%= t('.no_debts_title') %></h3>
        <p><%= t('.no_debts_message') %></p>
      </div>
    <% end %>

    <div class="debts-actions">
      <%= render Ui::ButtonComponent.new(
        text: t(".add_new.#{ @direction }"),
        url: new_debt_path(direction: @direction),
        variant: :primary,
        size: :lg,
        full_width: true
      ) %>
    </div>
  </div>
</div>
